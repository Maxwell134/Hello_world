name: Dispatch Event

on:
  workflow_dispatch:

jobs:
  dispatch:
    runs-on: self-hosted

    steps:

      - name: Checkout repo 
        uses: actions/checkout@v3
        
      # - name: Install requirements 
      #   run: |
      #     # apt update -y  && \
      #     # apt install -y python3-pip && \
      #     pip install flask 
        
      - name: Send Repository Dispatch Event
        run: echo "Hello world"

      - name: python sample
        run:  |
          python3 -m venv venv  # Create a virtual environment named 'venv'
          source venv/bin/activate  # Activate the virtual environment
          pip install --upgrade pip  # Upgrade pip in the virtual environment
          pip install flask  # Install dependencies inside the virtual environment
          python main.py  # Run the Python script
        
          
          # curl -X POST \
          #   -H "Accept: application/vnd.github.v3+json" \
          #   -H "Authorization: token ${{ secrets.ACCESS_TOKEN }}" \
          #   https://api.github.com/repos/Maxwell134/K3s_set_up-in-aws/dispatches \
          #   -d '{"event_type": "custom-event"}'
